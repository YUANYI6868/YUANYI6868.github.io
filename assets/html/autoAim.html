<!DOCTYPE html>
<html>
    <head>
        <title>AutoAim</title>
        <link rel="stylesheet" type="text/css" href="../css/stylecontent.css">
    </head>

    <body id="body">
        <header id="header">
            <h1>基于屏幕图像自动瞄准</h1>
        </header>
        <!--2 graphs-->
        <div class="imgdiv">
            <div class="left">
                <img class="img" src="../img/cs1.gif">
            </div>
            <div class="right">
                <img class="img" src="../img/cs2.gif">
            </div>
        </div>
        <!--details-->
        <div class="details">
            <p>
                前段时间，国外一个外挂组织制作了一个基于图像识别自动瞄准的csgo外挂，国内也有博主模仿制作测试过，感觉挺有意思，也想
                自己写一个看一下效果如何。
            </p>
            <p>
                其主要思路，首先要获取屏幕图像，其次进行人物识别，然后控制鼠标瞄准设定位置，自动开火。
            </p>
            <p>
                像这种小程序用python写最方便，有很多开源库。比如屏幕截图和鼠标控制可以用pyautogui，图像处理可以用opencv，神经网络人物识别
                可以用mediapipe。这些库即是本个小程序的主要库。
            </p>
            <p>
                mediapipe的人物识别是用真人图片训练的，在测试中发现他对游戏中的人物也能识别，通用性比较好。而其这是个轻量模型，
                速度较快，可惜的是windows没有GPU版本。不过在游戏人物较远或者占屏幕比较小的时候，它基本不能准确识别。所以可以截取屏幕的一部分，
                然后放大，增加准确率。
            </p>
            <p>
                使用cs1.6测试，如上面左图，总体而言效果还不错，一旦识别，可以迅速瞄准头部。不过由于电脑配置太低（i5-4290），屏幕截图和
                人物识别所花时间太久，定位开枪时人物已经移动，第一次射击并没有击中。但电脑玩家停下来射击时，这次又重新识别定位射击，并准确爆头。
            </p>
            <p>
                上面右图，当我们离电脑玩家过远时，人物识别时有时无，而且一旦识别定位射击，所花时间太长，由于我们和电脑玩家都在移动，
                所以自动射击点早已偏离真实目标，导致无法击中。当我们逐渐靠近时，即使有所偏离，由于目标人物变大，重新识别锁定后仍可准确爆头。
                可见此程序对于喜欢站着或蹲着不动射击的对手杀伤力较大，对于喜欢边跑边开枪的对手威胁较小。
            <p>
                此程序加硬件配置相当于一般玩家水平，距离高端人类玩家还有很大差距。但是总体而言，这个思路还是可行的，只要提高硬件配置，
                使用重量深度神经网路，增加识别准确性，缩短识别时间，极有可能超越高端人类玩家。本次测试我只是控制人物移动，并且将准星往
                电脑人物靠近，瞄准头部和开枪由程序执行。假如我自己正常瞄准射击，再加此程序辅助，肯定可以超出一般玩家水平。
            </p>
            <p>
                虽然此外挂看起来是模拟人类，似乎难以被反外挂软件发现，但在我测试csgo中竟然发现，虽然csgo图像质量更高，更容易被mediapipe识别，
                但是pyautogui不能控制准星移动。有可能官方修复此bug，比如检测准星移动和鼠标发送的移动不匹配。
            </p>
            <p>编程语言：Python</p>
            <p>辅助库：pyautogui, opencv, mediapipe</p>
            
        </div>
        <div class="date">
            <p>2021-10-20</p>
        </div>

    </body>

</html>